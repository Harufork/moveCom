{% extends 'orders/base_detail_order.html' %}
{% block data %}

{% if object.move_order %}
    <p>–ó–∞–∫–∞–∑:<a href="{{ object.move_order.get_absolute_url }}"> {{ object.move_order }}</a></p>
    <div class="btm_order_panel">
{% else %}
    <div class="btm_order_panel">
    {% if perms.orders.add_moveorder and not object.is_canceled %}
    <form action="{% url 'get_move_order_from_request' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="reqmoveid" value="{{ object.pk }}">
        <input class="abtn btnfocus" type="submit" value="–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞—è–≤–∫–∏">
    </form>
    {% endif %}
{% endif %}

{% if not object.is_completed and not object.is_canceled and not object.is_confirm %}
  {% if bool_perm_of_user.change %}
    <a class="abtn" href="{{buttons_urls.change}}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
  {% endif %}
    {% if perms.orders.rejection_move_request%}
    <form action="{% url 'rejection_move_request' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="reqmoveid" value="{{ object.move_request.pk }}">
        <input class="abtn" type="submit" value="–û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–∫–∞–∑">
    </form>
    {% endif %}
{% endif %}


{% if bool_perm_of_user.delete %}
<a class="abtn" href="{{buttons_urls.delete}}">–£–¥–∞–ª–∏—Ç—å</a>
{% endif %}
</div>




<p>{{verbose.status}}: {{ object.get_status_display }}</p>
<p>{{verbose.date_of_creation}}: {{ object.date_of_creation }}</p>
<p>{{verbose.creater}}: <a href=""> {{ object.creater }} </a></p>
<p>{{verbose.full_name}}: {{ object.full_name }}</p>
<p>{{verbose.phone_number}}: {{ object.phone_number }}</p>
<p>{{verbose.time_type}}: {{ object.get_time_type_display }}</p>
<p>{{verbose.date_of_completion}}: {{ object.date_of_completion }}</p>
<p>{{verbose.time_of_completion}}: {{ object.time_of_completion }}</p>
<p>{{verbose.comment}}: {{ object.comment }}</p>
<p>{{verbose.payment_type}}: {{ object.get_payment_type_display }}</p>
{% if bool_perm_routs.view %}
<h3>–ú–∞—Ä—à—Ä—É—Ç—ã</h3>
<table class="table">
    <tr>
        <th></th>
        <th>–ò–∑</th>
        <th>–ö—É–¥–∞</th>
        <th>–î–∏—Å—Ç–∞–Ω—Ü–∏—è</th>
        <th></th>
        {% if bool_perm_routs.change %}
        <th></th>
        {% endif %}
        {% if bool_perm_routs.delete %}
        <th></th>
        {% endif %}
    </tr>
    {%for rowobj in routs %}
    <tr>
        <td>{{forloop.counter}}</td>
        <td>{{rowobj.point_a}}</td>
        <td>{{rowobj.point_b}}</td>
        <td>{{rowobj.distance}} –∫–º.</td>
        <td class="btn_table"><a href="{{ rowobj.get_absolute_url }}">‚û•–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></td>
        {% if bool_perm_routs.change %}
        <td class="btn_table"><a title="–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç" href="{% url buttons_routs_urls.abstract_change rowobj.pk %}">‚úê–†–µ–¥</a></td>
        {% endif %}
        {% if bool_perm_routs.delete %}
        <td class="btn_table"><a class="del_table" href="{% url buttons_routs_urls.abstract_delete rowobj.pk %}" title="–£–¥–∞–ª–∏—Ç—å">üóë</a></td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% if bool_perm_employees.view %}
<h3>–ü–µ—Ä—Å–æ–Ω–∞–ª</h3>
<table class="table">
    <tr>
        <th></th>
        <th>–†–æ–ª—å</th>
        <th>–ö–æ–ª-–≤–æ</th>
        <th>–ù–∞–π–º –Ω–∞</th>
        <th></th>
        {% if bool_perm_employees.change %}
        <th></th>
        {% endif %}
        {% if bool_perm_employees.delete %}
        <th></th>
        {% endif %}
    </tr>
    {%for rowobj in employees %}
    <tr>
        <td>{{forloop.counter}}</td>
        <td><a href="">{{rowobj.group}}</a></td>
        <td>{{rowobj.total}}</td>
        <td>{{rowobj.hired_hours}} —á.</td>
        <td class="btn_table"><a href="{{ rowobj.get_absolute_url }}">‚û•–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></td>
        {% if bool_perm_employees.change %}
        <td class="btn_table"><a title="–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç" href="{% url buttons_employees_urls.abstract_change rowobj.pk %}">‚úê–†–µ–¥</a></td>
        {% endif %}
        {% if bool_perm_employees.delete %}
        <td class="btn_table"><a class="del_table" href="{% url buttons_employees_urls.abstract_delete rowobj.pk %}" title="–£–¥–∞–ª–∏—Ç—å">üóë</a></td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% if bool_perm_transports.view %}
<h3>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</h3>
<table class="table">
    <tr>
        <th></th>
        <th>–í–∏–¥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</th>
        <th>–ö–æ–ª-–≤–æ</th>
        <th>–ù–∞–π–º –Ω–∞</th>
        <th></th>
        {% if bool_perm_transports.change %}
        <th></th>
        {% endif %}
        {% if bool_perm_transports.delete %}
        <th></th>
        {% endif %}
    </tr>
    {%for rowobj in transports %}
    <tr>
        <td>{{forloop.counter}}</td>
        <td><a href="{{rowobj.mode_transport.get_absolute_url}}">{{rowobj.mode_transport}}</a></td>
        <td>{{rowobj.total}}</td>
        <td>{{rowobj.hired_hours}} —á.</td>
        <td class="btn_table"><a href="{{ rowobj.get_absolute_url }}">‚û•–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></td>
        {% if bool_perm_transports.change %}
        <td class="btn_table"><a title="–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç" href="{% url buttons_transports_urls.abstract_change rowobj.pk %}">‚úê–†–µ–¥</a></td>
        {% endif %}
        {% if bool_perm_transports.delete %}
        <td class="btn_table"><a class="del_table" href="{% url buttons_transports_urls.abstract_delete rowobj.pk %}" title="–£–¥–∞–ª–∏—Ç—å">üóë</a></td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% if bool_perm_packings.view %}
<h3>–ó–∞–∫–∞–∑–∞–Ω–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞</h3>
<p>{{verbose.receiving_packaging}}: {{ object.get_receiving_packaging_display }}</p>
<table class="table">
    <tr>
        <th></th>
        <th>–£–ø–∞–∫–æ–≤–∫–∞</th>
        <th>–ö–æ–ª-–≤–æ</th>
        <th>–ï–¥. –∏–∑–º.</th>
        <th></th>
        {% if bool_perm_packings.change %}
        <th></th>
        {% endif %}
        {% if bool_perm_packings.delete %}
        <th></th>
        {% endif %}
    </tr>
    {%for rowobj in packings %}
    <tr>
        <td>{{forloop.counter}}</td>
        <td><a href="{{rowobj.packing.get_absolute_url}}">{{rowobj.packing}}</a></td>
        <td>{{rowobj.total}}</td>
        <td><a href="{{rowobj.packing.unit.get_absolute_url}}">{{rowobj.packing.unit}}</a></td>
        <td class="btn_table"><a href="{{ rowobj.get_absolute_url }}">‚û•–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a></td>
        {% if bool_perm_packings.change %}
        <td class="btn_table"><a title="–ò–∑–º–µ–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç" href="{% url buttons_packings_urls.abstract_change rowobj.pk %}">‚úê–†–µ–¥</a></td>
        {% endif %}
        {% if bool_perm_packings.delete %}
        <td class="btn_table"><a class="del_table" href="{% url buttons_packings_urls.abstract_delete rowobj.pk %}" title="–£–¥–∞–ª–∏—Ç—å">üóë</a></td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endblock %}